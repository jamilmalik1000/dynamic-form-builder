<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Form Builder</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <div class="row min-vh-100">
            <!-- Left Panel: Form Builder -->
            <div class="col-lg-6 builder-panel">
                <div class="builder-header px-3 py-2">
                    <h1 class="mb-0"><i class="fas fa-hammer"></i> Form Builder</h1>
                </div>

                <div class="builder-toolbar px-3 py-2 gap-2">
                    <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addFieldModal">
                        <i class="fas fa-plus"></i> Add Field
                    </button>
                    <button type="button" class="btn btn-danger btn-sm" id="clearFormBtn">
                        <i class="fas fa-trash"></i> Clear Form
                    </button>
                </div>

                <div class="fields-list p-3" id="fieldsList">
                    <div class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <p>No fields yet. Add one to get started!</p>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Live Preview -->
            <div class="col-lg-6 preview-panel">
                <div class="preview-header px-3 py-2">
                    <h1 class="mb-0"><i class="fas fa-eye"></i> Live Preview</h1>
                </div>

                <form id="previewForm" class="preview-form p-3 m-3">
                    <div id="formFields"></div>
                    <div class="preview-actions mt-3 text-center">
                        <button type="submit" class="btn btn-success btn-lg" id="submitBtn" disabled>
                            <i class="fas fa-paper-plane"></i> Submit Form
                        </button>
                    </div>
                </form>

                <div id="submissionsSection" class="submissions-section p-3 m-3 d-none">
                    <h3 class="mb-2"><i class="fas fa-list"></i> Submissions</h3>
                    <div class="submissions-toolbar mb-2 gap-2">
                        <button type="button" class="btn btn-sm btn-outline-primary" id="exportJsonBtn">
                            <i class="fas fa-download"></i> Export JSON
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-success" id="exportCsvBtn">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-danger" id="clearSubmissionsBtn">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                    <div class="submissions-table">
                        <table class="table table-sm table-hover mb-0">
                            <thead id="submissionsHead"></thead>
                            <tbody id="submissionsBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Field Modal -->
    <div class="modal fade" id="addFieldModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header px-3 py-2">
                    <h5 class="modal-title">Add New Field</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body px-3 py-2">
                    <div class="mb-2">
                        <label for="fieldName" class="form-label mb-1">Field Name</label>
                        <input type="text" class="form-control" id="fieldName" placeholder="e.g., Full Name">
                    </div>
                    <div class="mb-2">
                        <label for="fieldType" class="form-label mb-1">Field Type</label>
                        <select class="form-select" id="fieldType">
                            <option value="text">Text</option>
                            <option value="email">Email</option>
                            <option value="number">Number</option>
                            <option value="select">Select</option>
                            <option value="radio">Radio</option>
                            <option value="checkbox">Checkbox</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <label for="fieldOptions" class="form-label mb-1">Options (for Select/Radio/Checkbox)</label>
                        <input type="text" class="form-control" id="fieldOptions" placeholder="Comma-separated: Option 1, Option 2">
                    </div>
                    <div class="mb-2">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="fieldRequired">
                            <label class="form-check-label" for="fieldRequired">
                                Required Field
                            </label>
                        </div>
                    </div>
                    <div class="mb-2">
                        <label for="fieldMinLength" class="form-label mb-1">Min Length</label>
                        <input type="number" class="form-control" id="fieldMinLength" placeholder="Leave empty for no limit" min="0">
                    </div>
                    <div class="mb-2">
                        <label for="fieldMaxLength" class="form-label mb-1">Max Length</label>
                        <input type="number" class="form-control" id="fieldMaxLength" placeholder="Leave empty for no limit" min="0">
                    </div>
                    <div class="mb-2">
                        <label for="fieldErrorMsg" class="form-label mb-1">Custom Error Message</label>
                        <input type="text" class="form-control" id="fieldErrorMsg" placeholder="e.g., Please enter a valid email">
                    </div>
                </div>
                <div class="modal-footer px-3 py-2">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="addFieldBtn">Add Field</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Field Modal -->
    <div class="modal fade" id="editFieldModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header px-3 py-2">
                    <h5 class="modal-title">Edit Field</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body px-3 py-2">
                    <div class="mb-2">
                        <label for="editFieldName" class="form-label mb-1">Field Name</label>
                        <input type="text" class="form-control" id="editFieldName">
                    </div>
                    <div class="mb-2">
                        <label for="editFieldType" class="form-label mb-1">Field Type</label>
                        <select class="form-select" id="editFieldType">
                            <option value="text">Text</option>
                            <option value="email">Email</option>
                            <option value="number">Number</option>
                            <option value="select">Select</option>
                            <option value="radio">Radio</option>
                            <option value="checkbox">Checkbox</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <label for="editFieldOptions" class="form-label mb-1">Options (for Select/Radio/Checkbox)</label>
                        <input type="text" class="form-control" id="editFieldOptions" placeholder="Comma-separated: Option 1, Option 2">
                    </div>
                    <div class="mb-2">
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="editFieldRequired">
                            <label class="form-check-label" for="editFieldRequired">
                                Required Field
                            </label>
                        </div>
                    </div>
                    <div class="mb-2">
                        <label for="editFieldMinLength" class="form-label mb-1">Min Length</label>
                        <input type="number" class="form-control" id="editFieldMinLength" min="0">
                    </div>
                    <div class="mb-2">
                        <label for="editFieldMaxLength" class="form-label mb-1">Max Length</label>
                        <input type="number" class="form-control" id="editFieldMaxLength" min="0">
                    </div>
                    <div class="mb-2">
                        <label for="editFieldErrorMsg" class="form-label mb-1">Custom Error Message</label>
                        <input type="text" class="form-control" id="editFieldErrorMsg">
                    </div>
                </div>
                <div class="modal-footer px-3 py-2">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveFieldBtn">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0 px-3 py-2">
                    <h5 class="modal-title"><i class="fas fa-check-circle text-success"></i> Success!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body px-3 py-2">
                    <p class="mb-0">Form submitted successfully. Data saved to localStorage.</p>
                </div>
                <div class="modal-footer border-0 px-3 py-2">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/data.js"></script>
    <script src="js/validation.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/builder.js"></script>
</body>
</html>
